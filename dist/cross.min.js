/* =================================================
 *  cross - v0.2.1
 *  multi-device navigation menu
 *  https://github.com/idomusha/cross
 *
 *  Made by idomusha
 *  Under MIT License
 * =================================================
 */
!function(a,b){var c,d={defaults:{types:[],device:"",touch:!1,mouse:!1,key:!1,oHandlersData:[],jHandlersData:{},iViewportWidth:1024,iInterval:200,debug:!1},options:{},settings:{},init:function(){this.settings=b.extend({},this.defaults,this.options),c=this.settings,c.debug&&log("##################### init()"),"mobile"==c.device||"tablet"==c.device?this.set("touch",!0):this.set("mouse",!0),c.oHandlersData={mouse:[],touch:[],key:[]},this.bindUIActions()},bindUIActions:function(){c.debug&&log("##################### bindUIActions()");var a,e;b(document).on("mousemove",function(b){return e?void(e=!1):void(c.types.indexOf("mouse")>-1||(c.debug&&log(">>> mousemove"),"undefined"!=typeof a&&clearTimeout(a),a=setTimeout(function(){c.debug&&log(">>> movewait"),d.set("mouse",b),d.handleInteractionTypeChange(b)},c.iInterval)))}),b(document).on("touchstart",function(a){c.types.indexOf("touch")>-1||(c.debug&&log(">>> touchstart"),d.set("touch",a),d.handleInteractionTypeChange(a),e=!0)})},define:function(a){c.debug&&log("##################### define()");var d=null;if("undefined"!=typeof a)return"object"==typeof a&&null!==a?d=a:"string"==typeof a&&(d=b(a)),d},set:function(a){"mouse"==a?(b("html").removeClass("touch").addClass("mouse"),c.touch=!1,c.mouse=!0,d.array.add(c.types,"mouse"),d.array.remove(c.types,"touch")):"touch"==a&&(b("html").removeClass("mouse").addClass("touch"),c.touch=!0,c.mouse=!1,d.array.add(c.types,"touch"),d.array.remove(c.types,"mouse"))},start:function(){d.handleInteractionTypeChange(!0)},handleInteractionTypeChange:function(a){var b="boolean"==typeof a&&a?"is setted":"has changed";c.debug&&log("---------------------------------------------------"),c.debug&&log("Interaction type "+b+": "+c.types.toString()),c.debug&&log("---------------------------------------------------"),d["switch"]()},store:function(a,b,d,e){c.debug&&log("##################### store()"),c.debug&&log("- context",a),c.debug&&log("- selector",b),c.debug&&log("- event",d),c.debug&&log("- handler",e),c.oHandlersData[a].push({selector:b,event:d,handler:e}),c.debug&&log("s.oHandlersData",c.oHandlersData)},"switch":function(){c.debug&&log("##################### switch()");var a={on:c.types.indexOf("mouse")>-1?"mouse":"touch",off:c.types.indexOf("mouse")>-1?"touch":"mouse"};_type="mouse"in c.types?"mouse":"touch",c.debug&&log(c.types),d.on(a.on),d.off(a.off)},on:function(a){c.debug&&log("##################### on()");for(var b=0;b<c.oHandlersData[a].length;b++){var d={selector:c.oHandlersData[a][b].selector,event:c.oHandlersData[a][b].event,handler:c.oHandlersData[a][b].handler};d.selector.on(d.event,d.handler)}},off:function(a){c.debug&&log("##################### off()");for(var b=0;b<c.oHandlersData[a].length;b++){var d={selector:c.oHandlersData[a][b].selector,event:c.oHandlersData[a][b].event,handler:c.oHandlersData[a][b].handler};d.selector.off(d.event,d.handler)}},array:{add:function(a,b){c.debug&&log("##################### array.add()"),a.push(b)},remove:function(a,b){c.debug&&log("##################### array.remove()");var d=a.indexOf(b);d>-1&&a.splice(d,1)}},object:{add:function(a,b,d){return c.debug&&log("##################### object.add()"),void 0!=this.collection[b]?void 0:(this.collection[b]=d,++this.count)},remove:function(a,b){return c.debug&&log("##################### object.remove()"),void 0==this.collection[b]?void 0:(delete this.collection[b],--this.count)},iterate:function(a){for(var b in a)a.hasOwnProperty(b)&&("object"==typeof a[b]?d.iterate(a[b]):console.log(b+"   "+a[b]))},get:function(a,b){c.debug&&log("##################### object.get()");for(var b in a)if(a.hasOwnProperty(b))return a[b]}},destroy:function(){c.debug&&log("##################### destroy()"),b.removeData(d.get(0))},refresh:function(){c.debug&&log("##################### refresh()"),d.destroy(),d.init()}};a.Both=d}(window,jQuery),function(a,b,c,d){"use strict";function e(c){this._name=f,this._defaults=b[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="Threshold";a.extend(e.prototype,{init:function(){var a=this;a.buildCache(),a.bindEvents(),a.callbacks={},a.set()},destroy:function(){var a=this;a.unbindEvents(),a.unset(),a.window.removeData()},buildCache:function(){var c=this;c.window=a(b),c.$html=a("html")},bindEvents:function(){var a=this;a.window.on("resize."+a._name,function(){this._debug&&console.log("----------- resize."+a._name),a.reset()})},unbindEvents:function(){var a=this;a.window.off("."+a._name)},reset:function(){this._debug&&console.log("########### reset()");var a=this;a.unset(!0)},unset:function(b){this._debug&&console.log("########### unset()");var c=this,d=c.$html.attr("class").split(" ").filter(function(a){return 0!==a.lastIndexOf(c.settings["class"],0)});c.$html.attr("class",a.trim(d.join(" "))),b&&c.set()},set:function(){this._debug&&console.log("########### set()");var b=this;a(".width-full").hide(),b.width=a(".width-fixed").eq(0).css("width"),a(".width-full").show();var c=b.settings.widths;for(var d in c)if(c.hasOwnProperty(d)){this._debug&&console.log(d+" = "+c[d]);var e=d,f=c[d];b.width===f&&(b.state=e)}this._debug&&console.log("width:",b.width),this._debug&&console.log("previousState:",b.previousState),this._debug&&console.log("state:",b.state),this._debug&&console.log("callbacks:",b.callbacks),b.$html.addClass(b.settings["class"]+"-"+b.state),b.previousState!==b.state?b.onChange.call(b):b.previousState=b.state},onChange:function(){this._debug&&console.log("########### onChange()");var a=this;this._debug&&console.log("state: "+a.state),a.callbacks[a.state]!==d&&a.call(a.callbacks[a.state]),a.callbacks.all!==d&&a.call(a.callbacks.all),a.previousState=a.state},call:function(b){this._debug&&console.log("########### onChange()"),this._debug&&console.log(b),a.each(b,function(a,b){"function"==typeof b&&b.call()})},after:function(a,b){this._debug&&console.log("########### after()");var c=this;if(a instanceof Array)for(var d=0;d<a.length;d++)c.after(a[d],b);else(c.settings.widths.hasOwnProperty(a)||"all"===a)&&c.store(a,b),this._debug&&console.log("for",a),this._debug&&console.log("callbacks",c.callbacks),(a===c.state||"all"===a)&&(null!=c.interval&&clearInterval(this.interval),c.timer=0,c.interval=setInterval(function(){1==c.timer&&(c.onChange.call(c),clearInterval(c.interval),c.interval=null),c.timer++}.bind(c),100))},store:function(a,b){this._debug&&console.log("########### store()");var c=this;c.callbacks[a]===d&&(c.callbacks[a]=[]),c.callbacks[a].push(b)}}),b[f]=function(c){a.data(b,f)||a.data(b,f,new e(c))},b[f].defaults={"class":"window",widths:{"x-large":"1480px",large:"1360px",medium:"1220px",small:"920px","x-small":"740px",mobile:"100%"},debug:!1}}(jQuery,window,document),function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.bFirstShow,this.$currentMenuItem=null,this.$lastMenuItem=null,this.clearLastMenuItem=null,this.delayBeforeSlideDown=null,this.dragging=!1,this._name=f,this._defaults=a.fn[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="cross";a.extend(e.prototype,{init:function(){var b=this;b.devices=["desktop","tablet","mobile"],b.devices.indexOf(b.settings.device)>-1?Both.options={device:b.settings.device}:device.tablet()?(Both.options={device:"tablet"},a('meta[name="viewport"]').attr("content","width=920")):device.mobile()&&(Both.options={device:"mobile"},a('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1.0")),b.buildCache(),Threshold({widths:b.settings.widths}),Both.init(),b.menuitemTouchend=function(a,c){this._debug&&console.log(">>> touchend menuitem"),c.preventDefault();var d=a,e=d.next('[role="menu"]');b.$collapsibleMenuItems.removeClass("expanded"),e.attr("hidden")?(d.addClass("expanded"),b.$collapsibleMenuItems.next('[role="menu"]').attr("hidden",!0),e.removeAttr("hidden")):e.attr("hidden",!0)},b.documentTouchstart=function(){b.dragging=!1},b.documentTouchmove=function(){b.dragging=!0},b.documentTouchend=function(c){b.dragging||(this._debug&&console.log("--------------- >>> touchend document"),b.$collapsibleMenuItems.hasClass("expanded")&&0==a(c.target).parents('[role="menubar"]').length&&(this._debug&&console.log(">>> close menuitems"),b.$collapsibleMenuItems.removeClass("expanded").next('[role="menu"]').attr("hidden",!0)))},b.menuitemMouseenter=function(a){function c(){b.$currentMenuItem.addClass("expanded"),e.removeAttr("hidden")}this._debug&&console.log("--------------- >>> mouseenter menuitem");var d=a;b.$currentMenuItem=d.children('[role="menuitem"]'),b.bFirstShow=null==b.$lastMenuItem?!0:!1;var e=b.$currentMenuItem.next('[role="menu"]');b.bFirstShow?b.delayBeforeSlideDown=setTimeout(function(){c()},250):(clearTimeout(b.clearLastMenuItem),c())},b.menuitemMouseleave=function(){this._debug&&console.log("--------------- >>> mouseleave menuitem"),b.$lastMenuItem=b.$currentMenuItem,b.clearLastMenuItem=setTimeout(function(){b.$lastMenuItem=null},0),clearTimeout(b.delayBeforeSlideDown),b.$collapsibleMenuItems.removeClass("expanded").next('[role="menu"]').attr("hidden",!0)},b.navMouseleave=function(){this._debug&&console.log("--------------- >>> mouseleave menu"),b.$lastMenuItem=null,b.bFirstShow=!1},b.bindEvents(Both.start),b.start()},destroy:function(){var a=this;a.unbindEvents(),a.$nav.removeData()},buildCache:function(){var d=this;d.document=a(c),d.window=a(b),d.$html=a("html"),d.$nav=a(d.element).children('[role="menubar"]'),d.$button=g.define(d.settings.button),d.$collapsibleMenuItems=d.$nav.children('[role="presentation"]').children('[role="menuitem"]').filter(function(){return a(this).next('[role="menu"]').length}),d.$collapsiblePresentations=d.$collapsibleMenuItems.parent('[role="presentation"]'),d.window=a(b),d.$html=a("html")},bindEvents:function(b){var c=this;c.$button.on("click."+c._name,function(){this._debug&&console.log("~~~~~~~~~~~ "+c.$button+" click"),c.$html.toggleClass("menu-on"),c.$button.toggleClass("opened")}),Both.store("touch",c.$collapsibleMenuItems,"touchend."+c._name,function(b){c.menuitemTouchend(a(this),b)}),Both.store("touch",c.document,"touchstart."+c._name,function(){c.documentTouchstart()}),Both.store("touch",c.document,"touchmove."+c._name,function(){c.documentTouchmove()}),Both.store("touch",c.document,"touchend."+c._name,function(a){c.documentTouchend(a)}),Both.store("mouse",c.$collapsiblePresentations,"mouseenter."+c._name,function(){c.menuitemMouseenter(a(this))}),Both.store("mouse",c.$collapsiblePresentations,"mouseleave."+c._name,function(){c.menuitemMouseleave()}),Both.store("mouse",c.$nav,"mouseleave."+c._name,function(a){c.navMouseleave()}),"function"==typeof b&&b.call()},unbindEvents:function(){var a=this;a.$button.off("click."+a._name),Both.settings.oHandlersData.touch[a.$collapsibleMenuItems]["touchend."+a._name]=null,Both.settings.oHandlersData.touch[a.document]["touchstart."+a._name]=null,Both.settings.oHandlersData.touch[a.document]["touchmove."+a._name]=null,Both.settings.oHandlersData.touch[a.document]["touchend."+a._name]=null,Both.settings.oHandlersData.touch[a.$collapsibleMenuItems]["mouseenter."+a._name]=null,Both.settings.oHandlersData.touch[a.$collapsibleMenuItems]["mouseleave."+a._name]=null,Both.settings.oHandlersData.touch[a.$nav]["mouseleave."+a._name]=null},reset:function(a){this._debug&&console.log("########### reset()");var b=this;b.unset(!0,a)},unset:function(a,b){this._debug&&console.log("########### unset()");var c=this;c.$collapsibleMenuItems.off("click."+c._name).removeClass("expanded").next('[role="menu"]').attr("hidden",!0),c.$collapsiblePresentations.off("mouseenter."+c._name),c.$collapsiblePresentations.off("mouseleave."+c._name),c.$nav.off("mouseleave."+c._name),a&&c.set(b)},set:function(b){this._debug&&console.log("###################### set()");var c=this;c._debug&&console.log("type",b),"short"===b?c.$collapsibleMenuItems.on("click."+c._name,function(b){c.menuitemTouchend(a(this),b)}):"long"===b&&(c.$collapsiblePresentations.on("mouseenter."+c._name,function(){c.menuitemMouseenter(a(this))}),c.$collapsiblePresentations.on("mouseleave."+c._name,function(){c.menuitemMouseleave()}),c.$nav.on("mouseleave."+c._name,function(){c.navMouseleave()}))},start:function(){this._debug&&console.log("###################### start()");var c=this;a(b).data("Threshold").after(c.settings["short"],function(){c.reset("short")}),a(b).data("Threshold").after(c.settings["long"],function(){c.reset("long")}),a(b).data("Threshold").after("all",function(){c.$html.removeClass("menu-on"),c.$button.removeClass("opened")})}});var g={define:function(b){this._debug&&console.log("##################### define()");var c=null;if("undefined"!=typeof b)return"object"==typeof b&&null!==b?c=b:"string"==typeof b&&(c=a(b)),c}};a.fn[f]=function(b){var c=arguments;if(b===d||"object"==typeof b)return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))});if("string"==typeof b&&"_"!==b[0]&&"init"!==b){var g;return this.each(function(){var d=a.data(this,"plugin_"+f);d instanceof e&&"function"==typeof d[b]&&(g=d[b].apply(d,Array.prototype.slice.call(c,1))),"destroy"===b&&a.data(this,"plugin_"+f,null)}),g!==d?g:this}},a.fn[f].defaults={widths:{"x-large":"1480px",large:"1360px",medium:"1220px",small:"920px","x-small":"740px",mobile:"100%"},"short":["mobile"],"long":["x-large","large","medium","small","x-small"],button:"#toggleNav",device:null,debug:!1}}(jQuery,window,document);