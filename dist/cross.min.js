/* =================================================
 *  cross - v1.1.0
 *  multi-device navigation menu
 *  https://github.com/idomusha/cross
 *
 *  Made by idomusha
 *  Under MIT License
 * =================================================
 */
!function(a,b,c,d){"use strict";function e(c){this._name=f,this._defaults=b[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="both";a.extend(e.prototype,{init:function(){var a=this;a._debug&&console.log("##################### init()"),a.buildCache(),a.types=[],a.touch=!1,a.mouse=!1,a.keyboard=!1,a.handlersData={mouse:[],touch:[],key:[]},a.scroll=!1,a.inputs=["input","select","textarea"],a.keys={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",33:"page up",34:"page down",35:"end",36:"home",37:"left arrow",38:"up arrow",39:"right arrow",40:"down arrow"},a.active={type:"",input:""},a.all={type:[],keys:[]},a._debug&&console.log("touch screen:",a.settings.touch),a.settings.touch?a.set("touch",!0):a.set("mouse",!0),a.bindEvents()},destroy:function(){var a=this;a.unbindEvents(),a.window.removeData()},buildCache:function(){this.document=a(c),this.$html=a("html")},bindEvents:function(){var a=this;a._debug&&console.log("##################### bindUIActions()");var b;a.document.on("mousemove."+a._name,function(c){if(a._debug&&console.log(">>> mousemove"),"mouse"!==a.active.type){if(a._debug&&console.log("_touchstart",b),b)return void(b=!1);if(a.scroll&"keyboard"===a.active.type)return void(a.scroll=!1);a.set.call(a,"mouse",c),a.handleInteractionTypeChange(c)}}),a.document.on("touchstart."+a._name,function(c){a._debug&&console.log(">>> touchstart"),b=!0,"touch"!==a.active.type&&(a.set("touch",c),a.handleInteractionTypeChange(c))}),a.document.on("keydown."+a._name,function(b){a.check.call(a,b)})},unbindEvents:function(){var a=this;a.document.off("mousemove."+a._name),a.document.off("touchstart."+a._name)},check:function(a){var b=this;if(b._debug&&console.log("##################### check()",a),b._debug&&console.log("event.type:",a.type),b._debug&&console.log("key:",b._key(a),b.keys[b._key(a)]),b._debug&&console.log("accessible key:",b.keys.hasOwnProperty(b._key(a))),b.keys.hasOwnProperty(b._key(a))){if("tab"!==b.keys[b._key(a)]&&b.inputs.indexOf(b._target(a).nodeName.toLowerCase())>=0)return void(b._debug&&console.log("| ignore navigation keys typing on form element"));if(b._debug&&console.log("| this pressed key causes an event mousemove"),b.scroll=!0,"keyboard"===b.active.type)return;b.set("keyboard",a),b.handleInteractionTypeChange(a)}},set:function(b,c){var e=this;if(e._debug&&console.log("##################### set()",b),"mouse"==b)e.keyboard=!1,e.touch=!1,e.mouse=!0,e._array.remove(e.types,"keyboard"),e._array.remove(e.types,"touch"),e._array.add(e.types,"mouse");else if("touch"==b)e.keyboard=!1,e.touch=!0,e.mouse=!1,e._array.remove(e.types,"keyboard"),e._array.remove(e.types,"mouse"),e._array.add(e.types,"touch");else if("keyboard"==b){if("keyboard"===e.active.type)return;e.mouse=!1,e.touch=!1,e.keyboard=!0,e._array.remove(e.types,"mouse"),e._array.remove(e.types,"touch"),e._array.add(e.types,"keyboard")}if(e.active.type=b,e._debug&&console.log("types:",e.types),e._debug&&console.log("inputs:",e.active.input),e._debug&&console.log("keys:",e.active.key),e.settings["class"])if(e.settings.name){if(e.$html.attr("class")!==d){var f=e.$html.attr("class").split(" ").filter(function(a){return 0!==a.lastIndexOf(e.settings.name,0)});e.$html.attr("class",a.trim(f.join(" ")))}e.$html.addClass(e.settings.name+"-"+e.active.type)}else a("html").removeClass("mouse touch keyboard"),e.$html.addClass(e.active.type);else e.settings.name?e.$html.attr("data-"+e.settings.name,e.active.type):e.$html.attr("data-"+e.defaults.name,e.active.type)},_key:function(a){return a.keyCode?a.keyCode:a.which},_target:function(a){return a.target||a.srcElement},_log:{keys:function(a){-1===this.active.keys.indexOf(this.keys[a])&&this.keys[a]&&this.active.keys.push(this.keys[a])}},_unlog:{keys:function(a){var b=key(a),c=this.active.keys.indexOf(this.keys[b]);-1!==c&&this.active.keys.splice(c,1)}},start:function(){this.handleInteractionTypeChange(!0)},handleInteractionTypeChange:function(a){var b=this,c="boolean"==typeof a&&a?"is setted":"has changed";b._debug&&console.log("---------------------------------------------------"),b._debug&&console.log("Interaction type "+c+": "+b.types.toString()),b._debug&&console.log("---------------------------------------------------"),b["switch"]()},store:function(a,b,c,d){var e=this;e._debug&&console.log("##################### store()"),e._debug&&console.log("- context",a),e._debug&&console.log("- selector",b),e._debug&&console.log("- event",c),e._debug&&console.log("- handler",d),e._array.add(e.handlersData[a],{selector:b,event:c,handler:d}),e._debug&&console.log("handlersData",e.handlersData),null!=e.interval&&clearInterval(this.interval),e.timer=0,e.interval=setInterval(function(){1==e.timer&&(e.start.call(e),clearInterval(e.interval),e.interval=null),e.timer++}.bind(e),100)},lose:function(a,b,c){var d=this;d._debug&&console.log("##################### lose()"),d._debug&&console.log("- context",a),d._debug&&console.log("- selector",b.selector),d._debug&&console.log("- event",c);for(var e=0;e<d.handlersData[a].length;e++)d.handlersData[a][e].selector.selector===b.selector&&d.handlersData[a][e].event===c&&(d.handlersData[a][e].selector.off(d.handlersData[a][e].event,d.handlersData[a][e].handler),d._array.remove(d.handlersData[a],d.handlersData[a][e]),e--)},"switch":function(){var a=this;a._debug&&console.log("##################### switch()");var b={on:a.types.indexOf("mouse")>-1?"mouse":"touch",off:a.types.indexOf("mouse")>-1?"touch":"mouse"};a._debug&&console.log(a.types),a.on(b.on),a.off(b.off)},on:function(a){var b=this;b._debug&&console.log("##################### on()");for(var c=0;c<b.handlersData[a].length;c++){var d={selector:b.handlersData[a][c].selector,event:b.handlersData[a][c].event,handler:b.handlersData[a][c].handler};d.selector.on(d.event,d.handler)}},off:function(a){var b=this;b._debug&&console.log("##################### off()");for(var c=0;c<b.handlersData[a].length;c++){var d={selector:b.handlersData[a][c].selector,event:b.handlersData[a][c].event,handler:b.handlersData[a][c].handler};d.selector.off(d.event,d.handler)}},_array:{add:function(a,b){this._debug&&console.log("##################### array.add()"),a.push(b)},remove:function(a,b){this._debug&&console.log("##################### array.remove()");var c=a.indexOf(b);c>-1&&a.splice(c,1)}},refresh:function(){this._debug&&console.log("##################### refresh()")},getType:function(){return _this._debug&&console.log(this),this.active.type},getKey:function(){return this.active.input},getTypes:function(){return this.types}}),b[f]=function(c){a.data(b,f)||a.data(b,f,new e(c))},b[f].defaults={touch:!1,name:"interaction","class":!1,debug:!1}}(jQuery,window,document),window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b,c,d){"use strict";function e(c){this._name=f,this._defaults=b[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="threshold";a.extend(e.prototype,{init:function(){var a=this;a.buildCache(),a.bindEvents(),a.callbacks={},a.set()},destroy:function(){var a=this;a.unbindEvents(),a.unset(),a.window.removeData()},buildCache:function(){var c=this;c.window=a(b),c.$html=a("html")},bindEvents:function(){var a=this;a.window.on("resize."+a._name,function(){this._debug&&console.log("----------- resize."+a._name),a.reset()})},unbindEvents:function(){var a=this;a.window.off("."+a._name)},reset:function(){this._debug&&console.log("########### reset()");var a=this;a.unset(!0)},unset:function(b){this._debug&&console.log("########### unset()");var c=this;if(c.settings["class"]){if(c.$html.attr("class")!==d){var e=c.$html.attr("class").split(" ").filter(function(a){return 0!==a.lastIndexOf(c.settings.name,0)});c.$html.attr("class",a.trim(e.join(" ")))}}else c.$html.removeAttr("data-"+c.settings.name);b&&c.set()},set:function(){this._debug&&console.log("########### set()");var a=this,b=a.settings.ranges;for(var c in b)if(b.hasOwnProperty(c)){this._debug&&console.log(c+" = "+b[c]);var d=c,e=(b[c],"only screen");e+=-1!==b[c][0]?" and (min-width: "+b[c][0]+")":"",e+=-1!==b[c][1]?" and (max-width: "+b[c][1]+")":"",matchMedia(e).matches&&(this._debug&&console.log("match: ",a.state=d),a.state=d)}this._debug&&console.log("previousState:",a.previousState),this._debug&&console.log("state:",a.state),this._debug&&console.log("callbacks:",a.callbacks),a.settings["class"]?a.$html.addClass(a.settings.name+"-"+a.state):a.$html.attr("data-"+a.settings.name,a.state),a.check.call(a)},get:function(){this._debug&&console.log("########### get()");var a=this;this._debug&&console.log("callbacks: ",a.callbacks);var b=a.callbacks;for(var c in b)if(b.hasOwnProperty(c)){var e=c,f=(b[c],[]);if(this._debug&&console.log("name: ",e),this._debug&&console.log('name.indexOf("|")',e.indexOf("|")),-1!==e.indexOf("|"))for(var g=0;g<e.split("|").length;g++)f.push(e.split("|")[g]),g===e.split("|").length-1&&(this._debug&&console.log("previousState ",this.previousState),this._debug&&console.log("_states ",f),this._debug&&console.log("_states.indexOf(_this.previousState) ",f.indexOf(a.previousState)),-1!==f.indexOf(a.state)&&(-1===f.indexOf(a.previousState)||a.previousState===d)&&a.call(a.callbacks[e]));else a.callbacks[e]!==d&&e===a.state&&a.call(a.callbacks[e])}a.callbacks.all!==d&&a.call(a.callbacks.all)},check:function(){this._debug&&console.log("########### check()");var a=this;a.previousState!==d&&(a.previousState!==a.state?a.onChange.call(a):a.previousState=a.state)},onChange:function(){this._debug&&console.log("########### onChange()");var a=this;this._debug&&console.log("#####################"),this._debug&&console.log("state: ",a.state),this._debug&&console.log("#####################"),a.get(),a.previousState=a.state},call:function(b){this._debug&&console.log("########### call()"),this._debug&&console.log(b),a.each(b,function(a,b){"function"==typeof b&&b.call()})},after:function(a,b){this._debug&&console.log("########### after()");var c=this,d=!0;if(a instanceof Array)for(var e=0;e<a.length;e++){var f=a[e];if(c.settings.ranges.hasOwnProperty(a[e])||(d=!1),-1!==f.indexOf("|"))for(var e=0;e<f.split("|").length;e++)c.settings.ranges.hasOwnProperty(f.split("|")[e])||(d=!1),e===f.split("|").length-1&&d&&c.store(f,b);else d&&c.store(f,b)}else if(-1!==a.indexOf("|"))for(var e=0;e<a.split("|").length;e++)c.settings.ranges.hasOwnProperty(a.split("|")[e])||(d=!1),e===a.split("|").length-1&&d&&c.store(a,b);else(c.settings.ranges.hasOwnProperty(a)||"all"===a)&&c.store(a,b);this._debug&&console.log("for",a),this._debug&&console.log("callbacks",c.callbacks),(a===c.state||"all"===a)&&(null!=c.interval&&clearInterval(this.interval),c.timer=0,c.interval=setInterval(function(){1==c.timer&&(c.onChange.call(c),clearInterval(c.interval),c.interval=null),c.timer++}.bind(c),100))},store:function(a,b,c){this._debug&&console.log("########### store()");var e=this;e.callbacks[a]===d&&(e.callbacks[a]=[]),e.callbacks[a].push(b)}}),b[f]=function(c){a.data(b,f)||a.data(b,f,new e(c))},b[f].defaults={ranges:{"x-large":["1600px",-1],large:["1440px","1599px"],medium:["1280px","1439px"],small:["960px","1279px"],"x-small":["760px","959px"],mobile:[-1,"759px"]},name:"window","class":!1,debug:!1}}(jQuery,window,document),function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.bFirstShow,this.$currentMenuItem=null,this.$lastMenuItem=null,this.clearLastMenuItem=null,this.delayBeforeSlideDown=null,this.dragging=!1,this.state=null,this._name=f,this._defaults=a.fn[f].defaults,this.settings=a.extend({},this._defaults,c),this._debug=this.settings.debug,this._debug&&console.log("defaults",this._defaults),this._debug&&console.log("settings",this.settings),this.init()}var f="cross";a.extend(e.prototype,{init:function(){var b=this;b.devices=["desktop","tablet","mobile"],b.settings.both.touch?both({touch:b.settings.both.touch,name:b.settings.both.name,"class":b.settings.both["class"]}):both({name:b.settings.both.name,"class":b.settings.both["class"]}),b.buildCache(),threshold({ranges:b.settings.threshold.ranges,name:b.settings.threshold.name,"class":b.settings.threshold["class"]}),b.menuitemTouchend=function(a,c){this._debug&&console.log(">>> touchend menuitem"),c.preventDefault();var d=a,e=d.next('[role="menu"]');b.$collapsibleMenuItems.attr("aria-expanded","false"),e.attr("hidden")?(d.attr("aria-expanded","true"),b.$collapsibleMenuItems.next('[role="menu"]').attr("hidden",!0),e.removeAttr("hidden")):e.attr("hidden",!0)},b.documentTouchstart=function(){b.dragging=!1},b.documentTouchmove=function(){b.dragging=!0},b.documentTouchend=function(c){b.dragging||(this._debug&&console.log("--------------- >>> touchend document"),a(c.target).closest(a(b.element)).length||!b.$html.hasClass("menu-on")||a(c.target).closest(b.$button).length||b.$button.trigger("click"),"false"!==b.$collapsibleMenuItems.attr("aria-expanded")&&0==a(c.target).parents('[role="menubar"]').length&&(this._debug&&console.log(">>> close menuitems"),b.$collapsibleMenuItems.attr("aria-expanded","false").next('[role="menu"]').attr("hidden",!0)))},b.menuitemMouseenter=function(a){function c(){b.$currentMenuItem.attr("aria-expanded","true"),e.removeAttr("hidden")}this._debug&&console.log("--------------- >>> mouseenter menuitem");var d=a;b.$currentMenuItem=d.children('[role="menuitem"]'),b.bFirstShow=null==b.$lastMenuItem?!0:!1;var e=b.$currentMenuItem.next('[role="menu"]');b.bFirstShow?b.delayBeforeSlideDown=setTimeout(function(){c()},250):(clearTimeout(b.clearLastMenuItem),c())},b.menuitemMouseleave=function(){this._debug&&console.log("--------------- >>> mouseleave menuitem"),b.$lastMenuItem=b.$currentMenuItem,b.clearLastMenuItem=setTimeout(function(){b.$lastMenuItem=null},0),clearTimeout(b.delayBeforeSlideDown),b.$collapsibleMenuItems.attr("aria-expanded","false").next('[role="menu"]').attr("hidden",!0)},b.navMouseleave=function(){this._debug&&console.log("--------------- >>> mouseleave menu"),b.$lastMenuItem=null,b.bFirstShow=!1},b.documentClick=function(c){this._debug&&console.log("--------------- >>> click document"),a(c.target).closest(a(b.element)).length||!b.$html.hasClass("menu-on")||a(c.target).closest(b.$button).length||b.$button.trigger("click")},b.start()},destroy:function(){var a=this;a.unbindEvents["short"](),a.unbindEvents["long"](),a.$nav.removeData()},buildCache:function(){var d=this;d.document=a(c.documentElement),d.window=a(b),d.$html=a("html"),d.$nav=a(d.element).find('[role="menubar"]'),d.$button=g.define(d.settings.button),d.$collapsibleMenuItems=d.$nav.children('[role="presentation"]').children('[role="menuitem"]').filter(function(){return a(this).next('[role="menu"]').length}),d.$collapsiblePresentations=d.$collapsibleMenuItems.parent('[role="presentation"]'),d.window=a(b),d.$html=a("html")},bindEvents:{"short":function(b){this._debug&&console.log("########### bindEvents.short()");var c=this;c.$button.on("click."+c._name,function(){this._debug&&console.log("~~~~~~~~~~~ "+c.$button+" click"),c.$collapsibleMenuItems.attr("aria-expanded","false").next('[role="menu"]').attr("hidden",!0),c.$html.toggleClass("menu-on"),c.$button.toggleClass("opened")}),c.$collapsibleMenuItems.on("click."+c._name,function(b){c.menuitemTouchend(a(this),b)}),c.document.on("click."+c._name,function(a){c.documentClick(a)}),"function"==typeof b&&b.call()},"long":function(c){this._debug&&console.log("########### bindEvents.long()");var d=this;a(b).data("both").store("touch",d.$collapsibleMenuItems,"touchend."+d._name,function(b){d.menuitemTouchend(a(this),b)}),a(b).data("both").store("touch",d.document,"touchstart."+d._name,function(){d.documentTouchstart()}),a(b).data("both").store("touch",d.document,"touchmove."+d._name,function(){d.documentTouchmove()}),a(b).data("both").store("touch",d.document,"touchend."+d._name,function(a){d.documentTouchend(a)}),a(b).data("both").store("mouse",d.$collapsiblePresentations,"mouseenter."+d._name,function(){d.menuitemMouseenter(a(this))}),a(b).data("both").store("mouse",d.$collapsiblePresentations,"mouseleave."+d._name,function(){d.menuitemMouseleave()}),a(b).data("both").store("mouse",d.$nav,"mouseleave."+d._name,function(a){d.navMouseleave()}),a(b).data("both").store("mouse",d.document,"click."+d._name,function(a){d.documentClick(a)}),"function"==typeof c&&c.call()}},unbindEvents:{"short":function(){this._debug&&console.log("########### unbindEvents.short()");var a=this;a.$button.off("click."+a._name),a.$collapsibleMenuItems.off("click."+a._name),a.document.off("click."+a._name)},"long":function(c){this._debug&&console.log("########### unbindEvents.long()");var d=this;a(b).data("both").lose("touch",d.$collapsibleMenuItems,"touchend."+d._name),a(b).data("both").lose("touch",d.document,"touchstart."+d._name),a(b).data("both").lose("touch",d.document,"touchmove."+d._name),a(b).data("both").lose("touch",d.document,"touchend."+d._name),a(b).data("both").lose("mouse",d.$collapsiblePresentations,"mouseenter."+d._name),a(b).data("both").lose("mouse",d.$collapsiblePresentations,"mouseleave."+d._name),a(b).data("both").lose("mouse",d.$nav,"mouseleave."+d._name),a(b).data("both").lose("mouse",d.document,"click."+d._name),"function"==typeof c&&c.call()}},reset:function(a){this._debug&&console.log("########### reset()");var b=this;b.unset(!0,a)},unset:function(a,b){this._debug&&console.log("########### unset()");var c=this;"short"===b?c.unbindEvents["long"].call(c):"long"===b&&c.unbindEvents["short"].call(c),a&&c.set(b)},set:function(a){this._debug&&console.log("###################### set()");var b=this;b._debug&&console.log("type",a),"short"===a?b.bindEvents["short"].call(b):"long"===a&&b.bindEvents["long"].call(b)},start:function(){this._debug&&console.log("###################### start()");var c=this;a(b).data("threshold").after(c.settings["short"],function(){"short"!==c.state&&(c.state="short",c.reset("short"),"function"==typeof c.settings.after["short"]&&c.settings.after["short"].call(c),"function"==typeof c.settings.after.all&&c.settings.after.all.call(c))}),a(b).data("threshold").after(c.settings["long"],function(){"long"!==c.state&&(c.state="long",c.reset("long"),"function"==typeof c.settings.after["long"]&&c.settings.after["long"].call(c),"function"==typeof c.settings.after.all&&c.settings.after.all.call(c))}),a(b).data("threshold").after("all",function(){}),"function"==typeof c.settings.after.init&&c.settings.after.init.call(c)}});var g={define:function(b){this._debug&&console.log("##################### define()");var c=null;if("undefined"!=typeof b)return"object"==typeof b&&null!==b?c=b:"string"==typeof b&&(c=a(b)),c}};a.fn[f]=function(b){var c=arguments;if(b===d||"object"==typeof b)return this.each(function(){a.data(this,f)||a.data(this,f,new e(this,b))});if("string"==typeof b&&"_"!==b[0]&&"init"!==b){var g;return this.each(function(){var d=a.data(this,f);d instanceof e&&"function"==typeof d[b]&&(g=d[b].apply(d,Array.prototype.slice.call(c,1))),"destroy"===b&&a.data(this,f,null)}),g!==d?g:this}},a.fn[f].defaults={threshold:{ranges:{"x-large":["1600px",-1],large:["1440px","1599px"],medium:["1280px","1439px"],small:["960px","1279px"],"x-small":["760px","959px"],mobile:[-1,"759px"]},name:"window","class":!1},"short":"mobile","long":"x-small|small|medium|large|x-large",after:{init:null,"short":null,"long":null,all:null},button:"#toggleNav",both:{touch:!1,name:"interaction","class":!1},debug:!1}}(jQuery,window,document);